<div class="container alignStart mt-4" style="max-width: 899px; font-family: SSTArabic-Roman;"
    [dir]="lang.dir =='ltr'?'ltr':'rtl'">
    <div [dir]="lang.dir =='ltr'?'ltr':'rtl'">
        <div *ngIf="optionActive !== 4">
            <div class="row">
                <div class="col-md-12">
                    <span *ngIf="optionActive != 5" class="bcTitle unicodeDir"><span class="curpointer" [routerLink]="['/mains/refundslanding']">{{lang.bc1}}</span> &gt; <span class="curpointer" [routerLink]="['/mains/refundslanding/new']">{{lang.bc2}}</span> &gt; </span><span *ngIf="optionActive != 5"
                        class="bcTitle bcTitleActive curpointer">{{lang.bc3}}</span>
                    <span *ngIf="optionActive == 5" class="bcTitle unicodeDir curpointer" [routerLink]="['/mains/refundslanding']">{{lang.bc1}} &gt; </span><span
                    *ngIf="optionActive == 5" class="bcTitle bcTitleActive curpointer">{{lang.bc4}}</span>
                </div>
            </div>
            <div class="row" style="width: 100% ; margin-top: 40px !important;">
                <div class="col-md-12">
                    <div class="stepHeader row">
                        <span class="stepBack col-md-6" (click)="back()">
                            <img [src]="lang['dir'] =='ltr'?'assets/image/arrow-left-green.svg':'assets/image/arrow-right-green.svg'"
                            style="width: 24px">
                            {{lang.back}}
                        </span>
                    </div>
                </div>
            </div>
            <div class="row mt-4">
                <div class="pageTitle col-6 txtbold" style="color: #232323;">
                    {{ lang.menu[optionActive - 1].title }}
                </div>
                <!-- <div class="imgAra col-6 pad-0-lt" style="text-align: -webkit-right" *ngIf="lang.menu[optionActive - 1].cards">
                    <span class="posrel">
                        <img (click)="tableView()"
                            [class]="viewSel== 'tableview'? 'Rectangle rightTableCard': 'RectangleDeselect rightTableCard'"
                            [src]='img1' class="rightTableCard" />
                    </span>
                    <span class="posrel">
                        <img (click)="listview()"
                            [class]="viewSel== 'listview'? 'Rectangle rightTableCard': 'RectangleDeselect rightTableCard'"
                            [src]="img2" class="rightTableCard" />
                    </span>
                </div> -->
                <div class="imgAra col-6 pad-0-lt" style="text-align: -webkit-right" *ngIf="optionActive == 5">
                    <span class="posrel">
                        <div class="col-md-12 col-sm-12 col-xs-12" style="justify-content: flex-end;display: flex;">
                            <div [ngClass]="statusColor(cardDetail.d.Statusx)"
                                class="tag32 Statusellipse"
                                style="height: fit-content;width:unset;padding:10px;font-size: 16px;padding: 7px 10px;">
                                {{cardDetail2[0].Status}}</div>
                        </div>
                    </span>
                </div>
            </div>

            <div class="row mt-2" *ngIf="lang.menu[optionActive - 1].subtitle!==''">
                <div class="col-md-12">
                    <div class="value textGray">
                        {{ lang.menu[optionActive - 1].subtitle }}
                    </div>
                </div>
            </div>
            <div *ngIf="optionActive != 5" class="Rectangle-12New"></div>
        </div>


        <div class="mt-3 mb-3">
            <form style="width: 100%">
                <!-- <div class="row" *ngIf="optionActive === 1">
                    <div class="col-md-12">
                        <form [formGroup]="VATrefundFormGroup1" (ngSubmit)="onSubmit1()">

                            <div class="row mt-4" [dir]="lang.dir =='ltr'?'ltr':'rtl'">
                                <div class="col-md-12 ff-search-box">
                                    <div class="ff-search-input-container" [ngClass]="
                                    lang.dir == 'rtl' ? 'float-right' : 'd-inline-block'
                                    ">
                                        <input class="commonInput" [placeholder]="lang.search" formControlName="searchText"/>
                                        <img src="assets/images/search.svg" alt="" class="ff-search-icon"
                                            [ngClass]="lang.dir === 'ltr' ? 'ff-search-icon-right': 'ff-search-icon-left'" />
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="viewSel === 'listview'" class="row mt-5" style="margin-bottom: 56px;">
                                <div class="col-md-6 col-sm-12 col-xs-12" style="width: 437px;" (click)="onSubmit1()">
                                    <div class="mb-2 cardCntrMb">
                                        <div class="add-card-large  col-md-6 ">
                                            <img class="px-2" src="assets/image/add.svg">
                                            <div class="value fwb textPrimary mx-1 mt-2">
                                                {{lang.vatRefund}}</div>
                                        </div>
                                    </div>
                                </div>
                                <ng-container *ngFor="let data of filtData | Search :  VATrefundFormGroup1.value.searchText">
                                    <div class="col-md-6 col-sm-12 col-xs-12 mb-2">
                                        <div class="mb-2 cardCntrMb" (click)="openSelectedCard(data.RefundFbnum)">
                                            <div class="filing-card textDark border"
                                                style="max-width: 482px;">
                                                <div class="row filing-card-upper px-3">
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="value  fwb Headellipses" style="font-size: 20px;">
                                                            {{data.RefundFbnum}}</div>
                                                        <div class="caption textGray"></div>
                                                    </div>
                                                    <div class="col-md-6 col-sm-6 col-xs-6" style="justify-content: flex-end;
                                                display: flex;">
                                                        <div [ngClass]="clr(data.RefundFbnum)"
                                                            class="tag32 Statusellipse"
                                                            style="height: fit-content;width:unset;padding:10px;font-size: 16px;padding: 7px 10px;">
                                                            {{data.Status}}</div>
                                                    </div>
                                                </div>
                                                <div class="divider">
                                                </div>
                                                <div class="row filing-card-down px-3" style="height: 67px;">
                                                    <div class="col-6 mobpad1">
                                                        <div class="caption textGray">{{lang.RequestDate}}</div>
                                                        <div class="value  fwb">{{getValidDate(data.RefundReqDt)}}</div>
                                                    </div>
                                                    <div class="col-6 mobpad1">
                                                        <div class="caption textGray">{{lang.RequestedAmount}}</div>
                                                        <div class="value  fwb">{{data.RequestedAmt}}</div>
                                                    </div>
                                                </div>
                                                <div class="row filing-card-down px-3" style="height: 67px;">
                                                    <div class="col-6 mobpad1">
                                                        <div class="caption textGray">{{lang.ReAssessedAmount}}</div>
                                                        <div class="value  fwb">{{data.ReassessAmt}}</div>
                                                    </div>
                                                    <div class="col-6 mobpad1">
                                                        <div class="caption textGray">{{lang.CreditBalance}}</div>
                                                        <div class="value  fwb">{{data.NetCreditBal}}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>

                            </div>
                            <div *ngIf="viewSel === 'tableview'" class="row mt-5" style="margin-bottom: 36px;">
                                <div class="col-12">
                                    <div class="mb-2 border">
                                        <div class="row" style="height: 44px;margin: 0; cursor: pointer;"
                                            (click)="onSubmit1()">
                                            <img class="col-auto" src="assets/image/add.svg">
                                            <div class="value fwb textPrimary mt-2 mx-1 col">{{lang.vatRefund}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <table *ngIf="viewSel === 'tableview' && filtData.length>0" class="table myTable table-responsive"
                                style="width: 100% !important; overflow: hidden;">
                                <thead style="width: 100%;">
                                    <tr>
                                        <th scope="col" style="width: 100%;">{{lang.FbNumber}}</th>
                                        <th scope="col" style="width: 100%;">{{lang.RequestDate}}</th>
                                        <th scope="col" style="width: 100%;">{{lang.RequestedAmount}}</th>
                                        <th scope="col" style="width: 100%;">{{lang.ReAssessedAmount}}</th>
                                        <th scope="col" style="width: 100%;">{{lang.CreditBalance}}</th>
                                        <th scope="col" style="width: 100%;">{{lang.Status}}</th>
                                    </tr>
                                </thead>
                                <tbody style="width: 100%;">
                                    <tr (click)="openSelectedCard(data.RefundFbnum)"
                                        *ngFor="let data of filtData | Search :  VATrefundFormGroup1.value.searchText">
                                        <td>{{data.RefundFbnum}}</td>
                                        <td>{{getValidDate(data.RefundReqDt)}}</td>
                                        <td>{{data.RequestedAmt}}</td>
                                        <td>{{data.ReassessAmt}}</td>
                                        <td>{{data.NetCreditBal}}</td>
                                        <td>
                                            <div [ngClass]="clr(data.RefundFbnum)" class="tag32 Statusellipse"
                                                style="font-size: 16px;padding: 7px 10px;">{{data.Status}}</div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </form>
                    </div>
                </div> -->
            
                <div class="row" *ngIf="optionActive === 2">
                    <div class="col-md-12">
                        <form [formGroup]="VATrefundFormGroup2" (ngSubmit)="onSubmit2()">
                            <div style="margin-bottom: 56px;">
                                <div class="row mb-3">
                                    <div class="col-xs-12 col-sm-6 mt-2 mb-2">
                                        <div class="matLabel labelMarginBottom" style="font-family: 'SSTArabic-Roman';">{{lang.IDType}}</div>
                                        <mat-select class="commonMatSelect" style="font-family: 'SSTArabic-Roman';" formControlName="DecidTy"
                                            (selectionChange)="onIdSelect()" [ngClass]="VATrefundFormGroup2.controls.DecidTy.errors && !isSubmit ?'inputErr':''">
                                            <mat-option value="ZS0001" class="sstcls">{{lang.NationalIqamaId}}</mat-option>
                                            <mat-option value="BUP002" class="sstcls">{{lang.CommercialRegistrationID}}</mat-option>
                                            <mat-option value="ZS0005" class="sstcls">{{lang.CompanyID}}</mat-option>
                                        </mat-select>
                                    </div>
                                    <div class="col-xs-12 col-sm-6 mt-2 mb-2">
                                        <div class="matLabel labelMarginBottom" style="font-family: 'SSTArabic-Roman'; ">{{lang.IDNumber}}</div>
                                        <mat-select class="commonMatSelect" formControlName="DecidNo" [ngClass]="VATrefundFormGroup2.controls.DecidNo.errors && !isSubmit ?'inputErr':''">
                                            <mat-option *ngFor="let IDnum of IDnumSet.d.results" class="sstcls" [value]="IDnum">
                                                {{ IDnum.Idnumber}} </mat-option>
                                        </mat-select>
                                    </div>
                                </div>
                                <div class="value mt-4 fwb color23 txtbold" style="font-size: 20px; font-weight: bold;">{{lang.Accounts}}</div>
                                <div class="row" style="margin: 0;">
                                    <!--  -->
                                    <div *ngIf="initloadData.d.IBANSet.results.length==0" class="col-md-3 tmpPadlt pad-rt-0 mt-4 cards p-left"  style="max-width: 209px;">
                                        <div class="selector-card border" [ngClass]="!isSubmit ?'inputErr':''" (click)="openaddaccpopup()">
                                            <div class="cardIcon">
                                                <img src="assets/image/add.svg" />
                                            </div>
                                            <p class="value fwb cardName" style="font-family: 'SSTArabic-Roman';">{{lang.Add}}<br />{{lang.Account}}</p>
                                        </div>
                                    </div>
                                    <span *ngFor="let accset of initloadData.d.IBANSet.results; let i=index " style="padding: 0px 5px 0px 5px;">
                                    <div class="col-md-3 pad-rt-0 mt-4 cards p-left"  (click)="selectAccount(i)" style="max-width: 250px;" *ngIf="accset.Iban!= ''" >
                                        <div [class]="selectedAcc != i ? 'selector-card border' : 'selector-card selector-card-active border'" [ngClass]="!isSubmit ? showerr : hideErr " style="max-width: 250px; width: 250px;">
                                            <div class="cardIconBg" >
                                                <img style="height: 32px; width: 32px;" src="assets/image/vatrefpositive.svg" />
                                            </div>
                                            <p class="cardSubNm" style="margin-top:7px; 
                                            font-family: 'SSTArabic-Roman';     
                                            font-size: 16px;
                                            font-weight: 500;
                                            font-stretch: normal;
                                            font-style: normal;
                                            line-height: 1.31;
                                            margin-top: 15px;
                                            letter-spacing: 0.23px;">{{accset.Iban}}</p>
                                        </div>
                                    </div>
                                </span>
                                </div>
                                <div class="row border vCenter px-3 mx-0 row-text rowbgColor mt-4" style="max-width: 899px;">
                                    <div class="col-xs-6 col-md-6 vCenter col-6">
                                        <div class="leftTextRfund px-3">{{lang.RefundAmount}} </div>
                                    </div>
                                    <div class="col-md-6" [ngClass]=" lang.dir === 'rtl' ? 'float-left' : 'text-right'">
                                        <div class="acc-total-amount currField1">
                                            <span [ngClass]="lang.dir === 'rtl' ? 'acc-number-align' : ''" >
                                            {{ getAmountString(landingDataNew.d.Rfamt) }}
                                            </span>
                                            {{ lang.SAR }}
                                        </div>
                                    </div>
                                    <!-- <div class="col-xs-6 col-md-6 col-6 currField1" >
                                         <span class="rightBoldText"*ngIf="langX=='AR'">{{lang.SAR}} {{landingDataNew.d.Rfamt}}</span> -->
                                        <!-- <span class="rightBoldText">{{landingDataNew.d.Rfamt}} {{lang.SAR}}</span> -->
                                        
                                    <!-- </div>  -->
                                </div>
                                <div class="border col-md-12 p-4 mt-3">
                                    <div class="row">
                                        <img src="assets/image/information.svg" class="attchIcon" />
                                        <div class="value c-filing-font-black mr-1 ml-1">
                                            {{lang.inst}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <button type="submit" class="btnPrimary btnCss" mat-raised-button>
                                {{ lang.continue }}
                            </button>
                        </form>
                    </div>
                </div>

                <div class="row" *ngIf="optionActive === 3">
                    <div class="col-md-12">
                        <form [formGroup]="VATrefundFormGroup3" (ngSubmit)="onSubmit3()">
                            <div class="mt-4">
                                <div class="summary-card  cardGap border">
                                    <div class="row  vCenter px-3 mx-0 summary-header-with-button">
                                        <div class="col-xs-6 col-md-6 vCenter row">
                                            <div class="Oval"><img class="mauto" src="assets/image/details.svg"></div>
                                            <div class="sectionTitle fwb px-3 color23 txtbold">{{lang.step2.Card1}}</div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="row vCenter px-3 vatref-card-section">
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.step2.RefundAmount}}</div>
                                            <div class="value fwb color23">{{landingDataNew.d.Rfamt}}</div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.step2.RefundType}}</div>
                                            <div *ngIf="landingDataNew.d.RefundTp!=''" class="value fwb">{{landingDataNew.d.RefundTp}}</div>
                                            <div *ngIf="landingDataNew.d.RefundTp==''" class="value fwb">{{lang.RefundRequest}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="summary-card  cardGap border">
                                    <div class="row  vCenter px-3 mx-0 summary-header-with-button">
                                        <div class="col-xs-6 col-md-6 vCenter row">
                                            <div class="Oval"><img class="mauto" src="assets/image/user.svg"></div>
                                            <div class="sectionTitle fwb px-3 color23 txtbold">{{lang.step2.Card2}}</div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="row vCenter px-3 vatref-card-section">
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.step2.Name}}</div>
                                            <div class="value fwb color23">{{landingDataNew.d.TinName}}</div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.step2.TIN}}</div>
                                            <div class="value fwb color23">{{landingDataNew.d.Tin}}</div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="row vCenter px-3 vatref-card-section">
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.step2.IdentificationNumber}}</div>
                                            <div class="value fwb color23">{{landingDataNew.d.Idnumber}}</div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.step2.VATAccountNumber}}</div>
                                            <div class="value fwb color23">{{landingDataNew.d.Fin}}</div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="vCenterSingle px-3 vatref-card-section">
                                        <div class="value mb-1 textGray">{{lang.step2.Address}}</div>
                                        <div class="value fwb color23">{{landingDataNew.d.BuildingNo}} , {{landingDataNew.d.Street}} , {{landingDataNew.d.Quarter}} , {{landingDataNew.d.RegionDesc}} , {{landingDataNew.d.City}} , {{landingDataNew.d.PostalCd}}</div>
                                    </div>

                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="summary-card  cardGap border">
                                    <div class="row  vCenter px-3 mx-0 summary-header-with-button">
                                        <div class="col-xs-6 col-md-6 vCenter row">
                                            <div class="Oval"><img class="mauto" src="assets/image/details.svg"></div>
                                            <div class="sectionTitle fwb px-3 color23 txtbold">{{lang.step2.Card4}}</div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="row vCenter px-3 vatref-card-section">
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.step2.IDType}}</div>
                                            <div class="value fwb color23">{{getidtype(VATrefundFormGroup2.value.DecidTy)}}</div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.step2.IDNumber}}</div>
                                            <div class="value fwb color23">{{VATrefundFormGroup2.value.DecidNo.Idnumber}}</div>
                                        </div> 
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="vCenterSingle px-3 vatref-card-section">
                                        <div class="value mb-1 textGray">{{lang.step2.IBANAccountNumber}}</div>
                                        <div class="value fwb color23">{{vatobject["d"]["Iban"]}}</div>
                                    </div>

                                </div>
                            </div>
                            <button type="submit" class="btnPrimary btnCss mt-5" mat-raised-button>
                                {{lang.Confirm}}
                            </button>
                        </form>
                    </div>
                </div>

                <div class="row" *ngIf="optionActive === 4">
                    <div class="col-md-12">
                        <form [formGroup]="VATrefundFormGroup4" (ngSubmit)="onSubmit4()">
                            <div class="mt-3">
                                <div class="centerItem" style="margin-bottom: 56px;">
                                    <div><img src="assets/image/success.svg"></div>
                                </div>
                                <div class="pageTitle col-md-12 mt-3" style="text-align: center;">
                                    {{lang.vatRefund}}
                                </div>
                                <div class="submiTtext col-md-12" style="margin-top: 8px;">
                                    {{lang.succ}}
                                </div>
                                <div class=" single-line-sec contentCenter" style="margin-top: 32px;">
                                    <div class="row vCenter border" style="width: 60%;height: 56px;">
                                        <div style="width: 50%;text-align: start;" class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.ReturnReferanceNumber}}</div>
                                        </div>
                                        <div style="width: 50%;text-align: end;" class="col-sm-6">
                                            <div class="value fwb">{{returnrefno.d.Fbnumx}}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12" style="text-align: center; margin-top: 56px;">
                                    <button mat-raised-button class="btnPrimary btnCss" [routerLink]="['/mains/refundslanding']">
                                        {{lang.Refunds}}
                                    </button>
                                </div>
                                <div class="col-md-12 goToDas" style="margin-top: 28px;" [routerLink]="['/main']">
                                   {{lang.GotoDashboard}}
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="row" *ngIf="optionActive === 5">
                    <div class="col-md-12">
                        <form [formGroup]="VATrefundFormGroup3">
                            <div class="mt-4">
                                <div class="summary-card  cardGap border">
                                    <div class="row  vCenter px-3 mx-0 summary-header-with-button">
                                        <div class="col-xs-6 col-md-6 vCenter row">
                                            <div class="Oval"><img class="mauto" src="assets/image/vatrefamount.svg"></div>
                                            <div class="sectionTitle fwb px-3 color23 txtbold">{{lang.Refunddetail.RefundAmounts}}</div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="row vCenter px-3 vatref-card-section">
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.ReassesmentAmount}}</div>
                                            
                                            <div class="value fwb color23 currField">
                                                <span [ngClass]="lang.dir === 'rtl' ? 'acc-number-align' : ''" >
                                                    {{ getAmountString(cardDetail2[0].ReassessAmt) }}
                                                    </span>
                                                    {{ lang.SAR }}
                                                <!-- {{cardDetail2[0].ReassessAmt}} {{lang.SAR}} -->
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.TotalOffset}}</div>
                                            <div class="value fwb color23 currField">
                                                <!-- {{cardDetail2[0].OffsetTot}} {{lang.SAR}} -->
                                                <span [ngClass]="lang.dir === 'rtl' ? 'acc-number-align' : ''" >
                                                    {{ getAmountString(cardDetail2[0].OffsetTot) }}
                                                    </span>
                                                    {{ lang.SAR }}

                                            </div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="row vCenter px-3 vatref-card-section">
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.NetCreditBalance}}</div>
                                            <div class="value fwb color23 currField">
                                                <!-- {{cardDetail2[0].NetCreditBal}} {{lang.SAR}} -->
                                                <span [ngClass]="lang.dir === 'rtl' ? 'acc-number-align' : ''" >
                                                    {{ getAmountString(cardDetail2[0].NetCreditBal) }}
                                                    </span>
                                                    {{ lang.SAR }}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="row vCenter px-3 vatref-card-section">
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.RequestedAmount}}</div>
                                            <div class="value fwb color23 currField">
                                                <span [ngClass]="lang.dir === 'rtl' ? 'acc-number-align' : ''" >
                                                    {{ getAmountString(cardDetail2[0].RequestedAmt) }}
                                                    </span>
                                                    {{ lang.SAR }}
                                                <!-- {{cardDetail2[0].RequestedAmt}} {{lang.SAR}} -->

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="summary-card  cardGap border">
                                    <div class="row  vCenter px-3 mx-0 summary-header-with-button">
                                        <div class="col-xs-6 col-md-6 vCenter row">
                                            <div class="Oval"><img class="mauto" src="assets/image/vatrefpositive.svg"></div>
                                            <div class="sectionTitle fwb px-3 color23 txtbold">{{lang.step2.Card4}}</div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="row vCenter px-3 vatref-card-section">
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.IDType}}</div>
                                            <div class="value fwb color23">{{getidtype(cardDetail.d.Idtype)}}</div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.IDNumber}}</div>
                                            <div class="value fwb color23">{{cardDetail.d.Idnum}}</div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="row vCenter px-3 vatref-card-section">
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.IBAN}}</div>
                                            <div class="value fwb color23">{{cardDetail.d.Iban}}</div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="sectionTitle fwb px-3 color23 txtbold">{{lang.Refunddetail.VATReturns}}</div>
                            </div>
                            <div class="mt-3" *ngFor="let data of cardDetail3">
                                <div class="summary-card  cardGap border">
                                    <div class="row  vCenter px-3 mx-0 summary-header-with-button">
                                        <div class="col-xs-6 col-md-6 vCenter row">
                                            <div class="Oval"><img class="mauto" src="assets/image/vatrefreturn.svg"></div>
                                            <div class="sectionTitle fwb px-3 color23 txtbold">{{lang.Refunddetail.VATReturns}}</div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="row vCenter px-3 vatref-card-section">
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.ReturnPeriod}}</div>
                                            <div class="value fwb color23">{{data.ReturnPeriod}}</div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.CreditBalance}}</div>
                                            <div class="value fwb color23 currField">
                                                <span [ngClass]="lang.dir === 'rtl' ? 'acc-number-align' : ''" >
                                                    {{ getAmountString(data.CreditBal) }}
                                                    </span>
                                                    {{ lang.SAR }}
                                                <!-- {{data.CreditBal}} {{lang.SAR}} -->

                                            </div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="row vCenter px-3 vatref-card-section">
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.ReassessedBalance}}</div>
                                            <div class="value fwb color23 currField">
                                                <!-- {{data.ReassessBal}} -->
                                                <span [ngClass]="lang.dir === 'rtl' ? 'acc-number-align' : ''" >
                                                    {{ getAmountString(data.ReassessBal) }}
                                                    </span> 
                                                    {{lang.SAR}}
                                                </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.Offset}}</div>
                                            <div class="value fwb color23 currField">
                                                <span [ngClass]="lang.dir === 'rtl' ? 'acc-number-align' : ''" >
                                                    {{ getAmountString(data.Offsets) }}
                                                    </span> 
                                                    {{lang.SAR}}
                                                <!-- {{data.Offsets}} {{lang.SAR}} -->
                                            </div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>
                                    <div class="row vCenter px-3 vatref-card-section">
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.NetCreditCard}}</div>
                                            <div class="value fwb color23 currField">
                                                <span [ngClass]="lang.dir === 'rtl' ? 'acc-number-align' : ''" >
                                                    {{ getAmountString(data.Offsets) }}
                                                    </span> 
                                                    {{lang.SAR}}
                                                <!-- {{data.NetCreditBal}} {{lang.SAR}} -->
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="value mb-1 textGray">{{lang.Refunddetail.Status}}</div>
                                            <div class="value fwb color23">{{data.Status}}</div>
                                        </div>
                                    </div>
                                    <div class="Rectanglengp"></div>

                                    <div class="vCenterSingle px-3 vatref-card-section">
                                        <div class="value mb-1 textGray">{{lang.Refunddetail.LastStatusChanged}}</div>
                                        <div class="value fwb color23">{{getValidDate(data.LastChgDt)}}</div>
                                    </div>

                                </div>
                            </div>
                        </form>
                    </div>
                </div> 

               
            </form>
        </div>
    </div>
</div>

<div class="modal" id="myModal" style="border-radius: 14px;">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header" style="border-bottom: none !important;">
                <button type="button" class="close" (click)="closepopup('can')" data-dismiss="modal"
                    style="width: 100%;" [style.text-align]="lang.dir === 'rtl' ? 'end' : 'end'"><img
                        src="assets/image/close.svg" /></button>
            </div>
            <div class="modal-body">
                <div class="container" style="max-height: 440px; overflow-y: auto;">
                    <div class="row" style="text-align: start;margin-left: 5%;margin-right: 5%;">
                        <div class="col-md-12">
                            <div class="filter1">{{lang.filter}}</div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="filter2">{{lang.Type}}</div>
                                    <div class="row">
                                        <!-- style="display: flex;" -->
                                        <ng-container *ngFor="let item of [1,2,3,4,5,6,7,8,9,0] ; let i=index">
                                            <div [class]="chipSelected != i ? 'chpNormal filter3 mt-3 mr-3' : 'chpSelected filter3 mt-3 mr-3'"
                                                style="min-height: 40px;" (click)="changeType(i)">
                                                <!-- [class]="!item.stat && cardSelected != i ?'selector-card border pb-3 px-3 mt-3' : 'selector-card-active selector-card border pb-3 px-3 mt-3'" class="filter3 mt-3 mr-3" -->
                                                <span class="filter4">
                                                    {{item}}
                                                </span>
                                            </div>
                                        </ng-container>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-12">
                                    <div class="filter2">{{lang.Status}}</div>
                                    <div class="row">
                                        <!-- style="display: flex;" StchipSelected-->
                                        <ng-container *ngFor="let item of [1,2,3,4,5,6,8,9,0] ; let i=index">
                                            <div [class]="StchipSelected != i ? 'chpNormal filter3 mt-3 mr-3' : 'chpSelected filter3 mt-3 mr-3'"
                                                style="min-height: 40px;" (click)="changestatus(i)">
                                                <span class="filter4">
                                                    {{item}}
                                                </span>
                                            </div>
                                        </ng-container>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-6">
                                    <button mat-button type="submit" class="btnCss mt-5"
                                        (click)="filterList()">{{lang.Apply}}</button>
                                </div>
                                <div class="col-md-6">
                                    <button mat-button type="submit" class="btnCss mt-5"
                                        (click)="resetFil()">{{lang.Reset}}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div
  class="modal alignStart"
  id="vatrefundterms"
  data-keyboard="false"
  data-backdrop="static"
  [dir]="lang.dir"
>
  <div class="modal-dialog center">
    <div class="modal-content">
      <div class="modal-body">
        <div class="px-4 py-3 col-md-12">
          <div class="col-md-12 alignEnd">
            <img
              src="assets/image/close.svg"
              class="modalCloseIcon"
              (click)="closeModal()"
            />
          </div>

          <div class="dark fbl f28 mt-4 mb-3 pageTitle">
            {{lang.Instructions}}
          </div>
        <div class="lightCard py-3 pr-3 mb-3 border">
          <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.instruction1}}</div>
          <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.instruction2}}</div>
          <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.instruction3}}</div>
          <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.instruction4}}</div>
          <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.instruction5}}</div>
          <div class="modalInstructions f12 gray mb-2 font-color" style="font-family:'SSTArabic-Roman';">{{lang.instruction6}}</div>
          <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.instruction7}}</div>
          <!-- <div class="modalInstructions f12 gray mb-1 font-color">99999999999999999999</div> -->
        </div>

          <div class="check row mx-0">
            <mat-checkbox
              class="checkboxAckCss"
              [(ngModel)]="instructionsAccepted"
              [ngClass]=" !instructionsAccepted ?checkboxerr:''"
            >
            </mat-checkbox>
            <div
              class="value textDark col-md-9 col-sm-9 col-xs-9 px-0 mx-2 popbtn"
              [ngClass]=" !instructionsAccepted ?checkboxerr:''"
              >
              {{lang.cnfchk}}
            </div>
          </div>

          <div class="col-md-12 mt-4 mb-2 alignEnd">
            <button
              class="btnPrimary btnprimary-width sstcls"
              (click)="cnfmodal()"
              mat-raised-button
              
            >
            <!-- [disabled]="!instructionsAccepted" -->
              {{lang.Confirm}}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div
  class="modal alignStart"
  id="vatConfirmation"
  data-keyboard="false"
  data-backdrop="static"
  [dir]="lang.dir"
>
  <div class="modal-dialog center">
    <div class="modal-content">
      <div class="modal-body">
        <div class="px-4 py-3 col-md-12">
            <div class="col-md-12 alignEnd">
                <img
                  src="assets/image/close.svg"
                  class="modalCloseIcon"
                  (click)="closeconfirmpopup()"
                />
              </div>
          <div class="dark fbl f28 mt-4 mb-3 pageTitle">
            {{lang.Confirmation}}
          </div>
        <div class="lightCard py-3 pr-3 mb-3 border">
          <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.confirmationtxt}}</div>
        </div>
          <div class="col-md-12 mt-4 mb-2 alignEnd">
            <button
              class="btnPrimary btnprimary-width sstcls"
              (click)="closeConfirmation()"
              mat-raised-button
            >
              {{lang.Confirm}}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div
  class="modal alignStart"
  id="submitterms"
  data-keyboard="false"
  data-backdrop="static"
  [dir]="lang.dir"
>
  <div class="modal-dialog center">
    <div class="modal-content">
      <div class="modal-body">
        <div class="px-4 py-3 col-md-12">
          <div class="col-md-12 alignEnd">
            <img
              src="assets/image/close.svg"
              class="modalCloseIcon"
              (click)="submitterms()"
            />
          </div>

          <div class="dark fbl f28 mt-4 mb-3 pageTitle">
            {{lang.termandcondition}}
          </div>
        <div class="lightCard py-3 pr-3 mb-3 border">
          <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.submitinstruction1}}</div>
          <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.submitinstruction2}}</div>
          <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.submitinstruction3}}</div>
          <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.submitinstruction4}}</div>
          <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.submitinstruction5}}</div>
        </div>

          <div class="check row mx-0">
            <mat-checkbox
              class="checkboxAckCss"
              [ngClass]=" !termsAccepted ?checkboxerr:''"
              [(ngModel)]="termsAccepted"
            >
            </mat-checkbox>
            <div
              class="value textDark col-md-9 col-sm-9 col-xs-9 px-0 mx-2"
              style="font-size: 12px; font-weight: 600;" [ngClass]=" !termsAccepted ?checkboxerr:''">
              {{lang.Accepttheterms}}
            </div>
          </div>

          <div class="col-md-12 mt-4 mb-2 alignEnd">
            <button
              class="btnPrimary btnprimary-width sstcls"
              (click)="submittermscnf()"
              mat-raised-button
            >
              {{lang.Confirm}}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<div
  class="modal alignStart"
  id="submitConfirmation"
  data-keyboard="false"
  data-backdrop="static"
  [dir]="lang.dir"
>
  <div class="modal-dialog center">
    <div class="modal-content">
      <div class="modal-body">
        <div class="px-4 py-3 col-md-12">
          <div class="col-md-12 alignEnd">
            <img
              src="assets/image/close.svg"
              class="modalCloseIcon"
              (click)="closeSubmitconfirmation()"
            />
          </div>

          <div class="dark fbl f28 mt-4 mb-3 pageTitle">
            {{lang.Confirmation}}
          </div>
        <div class="lightCard py-3 pr-3 mb-3 border">
            <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';"> {{lang.l1}}</div>
            <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';"> {{lang.l2}}</div>
            <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';"> {{lang.l3}}</div>
            <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';"> {{lang.l4}}</div>
          <!-- <div class="modalInstructions f12 gray mb-1 font-color" style="font-family:'SSTArabic-Roman';">{{lang.submitConfirmation}}</div> -->
         </div>

          <div class="check row mx-0">
            <mat-checkbox
              class="checkboxAckCss"
              [(ngModel)]="terms2Accepted"
              [ngClass]=" !terms2Accepted ?checkboxerr:''"
            >
            </mat-checkbox>
            <div
              class="value textDark col-md-9 col-sm-9 col-xs-9 px-0 mx-2"
              style="font-size: 12px; font-weight: 600;" [ngClass]=" !terms2Accepted ?checkboxerr:''">
              {{lang.submitConfirmation}}
              <!-- {{lang.cnfchk}} -->
            </div>
          </div>

          <div class="col-md-12 mt-4 mb-2 alignEnd">
            <!--  -->
            <button
              class="btnPrimary btnprimary-width sstcls"
              (click)="saveData()"
              mat-raised-button
            >
              {{lang.Confirm}}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div
  class="modal alignStart"
  id="addaccountpopup"
  data-keyboard="false"
  data-backdrop="static"
  [dir]="lang.dir"
>
  <div class="modal-dialog center">
    <div class="modal-content">
      <div class="modal-body">
        <div class="px-4 py-3 col-md-12">
          <div class="col-md-12 alignEnd">
            <img
              src="assets/image/close.svg"
              class="modalCloseIcon"
              (click)="closweAddaccount()"
            />
          </div>

          <div class="dark fbl f28 mt-4 mb-3 pageTitle">
            {{lang.addaccount}}
          </div>
        <div class="lightCard py-3 pr-3 mb-3">
            <input class="commonInput sstcls" [(ngModel)]="accno"  style="font-weight: bold;" [placeholder]="lang.Enteraccountnumber" />
         </div>
         <span class="sstcls checkboxerr">
             {{errmsg}}
         </span>
          <div class="col-md-12 mt-4 mb-2 alignEnd">
            <button
              class="btnPrimary btnprimary-width sstcls"
              (click)="addAccounthandler()"
              mat-raised-button
              [disabled]="accno.length==0"
            >
              {{lang.Confirm}}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




<notifier-container></notifier-container>